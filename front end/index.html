<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>AI Study Buddy</title>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        /* Light theme variables */
        --primary: #4caf50;
        --primary-dark: #3d8b40;
        --secondary: #2e3a59;
        --background: #f8f9fa;
        --surface: #ffffff;
        --on-surface: #212121;
        --on-secondary: #ffffff;
        --error: #d32f2f;
        --success: #2e7d32;
        --border-radius: 12px;
        --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        --transition: all 0.3s ease;
        --spacing: 8px;
      }

      [data-theme="dark"] {
        --background: #121212;
        --surface: #1e1e1e;
        --on-surface: #f5f5f5;
        --shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background-color: var(--background);
        color: var(--on-surface);
        line-height: 1.6;
        transition: var(--transition);
        padding-bottom: 60px; /* Space for potential bottom nav */
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 calc(var(--spacing) * 3);
      }

      /* Header Styles */
      header {
        background-color: var(--surface);
        box-shadow: var(--shadow);
        padding: calc(var(--spacing) * 2) 0;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: calc(var(--spacing) * 2);
      }

      .logo-icon {
        width: 36px;
        height: 36px;
        background-color: var(--primary);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }

      .logo-text {
        font-weight: 700;
        font-size: 1.5rem;
      }

      .header-actions {
        display: flex;
        gap: calc(var(--spacing) * 2);
        align-items: center;
      }

      /* Theme Toggle */
      .theme-toggle {
        background: none;
        border: none;
        cursor: pointer;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--surface);
        color: var(--on-surface);
        transition: var(--transition);
      }

      .theme-toggle:hover {
        background-color: color-mix(
          in srgb,
          var(--primary) 10%,
          transparent
        );
      }

      /* Button Styles */
      button {
        cursor: pointer;
        font-family: "Inter", sans-serif;
        border: none;
        border-radius: var(--border-radius);
        transition: var(--transition);
      }

      .btn {
        padding: calc(var(--spacing) * 2)
          calc(var(--spacing) * 3);
        font-weight: 500;
      }

      .btn-primary {
        background-color: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background-color: var(--primary-dark);
      }

      .btn-primary:disabled {
        background-color: color-mix(
          in srgb,
          var(--primary) 50%,
          transparent
        );
        cursor: not-allowed;
      }

      .btn-secondary {
        background-color: var(--surface);
        color: var(--on-surface);
        border: 1px solid
          color-mix(
            in srgb,
            var(--on-surface) 20%,
            transparent
          );
      }

      .btn-secondary:hover {
        background-color: color-mix(
          in srgb,
          var(--on-surface) 5%,
          transparent
        );
      }

      .btn-icon {
        display: flex;
        align-items: center;
        gap: var(--spacing);
      }

      /* Input Panel */
      .input-panel {
        margin: calc(var(--spacing) * 4) 0;
        background-color: var(--surface);
        border-radius: var(--border-radius);
        padding: calc(var(--spacing) * 4);
        box-shadow: var(--shadow);
      }

      .panel-title {
        font-size: 1.5rem;
        margin-bottom: calc(var(--spacing) * 3);
        font-weight: 600;
      }

      textarea {
        width: 100%;
        min-height: 200px;
        padding: calc(var(--spacing) * 3);
        border-radius: var(--border-radius);
        border: 1px solid
          color-mix(
            in srgb,
            var(--on-surface) 20%,
            transparent
          );
        background-color: var(--surface);
        color: var(--on-surface);
        font-family: "Inter", sans-serif;
        resize: vertical;
        margin-bottom: calc(var(--spacing) * 3);
        transition: var(--transition);
      }

      textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px
          color-mix(
            in srgb,
            var(--primary) 30%,
            transparent
          );
      }

      .chips-container {
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing);
        margin-bottom: calc(var(--spacing) * 3);
      }

      .chip {
        padding: calc(var(--spacing) * 1)
          calc(var(--spacing) * 2);
        background-color: color-mix(
          in srgb,
          var(--primary) 10%,
          transparent
        );
        color: var(--primary);
        border-radius: 16px;
        font-size: 0.875rem;
        cursor: pointer;
        transition: var(--transition);
        border: 1px solid transparent;
      }

      .chip.selected {
        background-color: var(--primary);
        color: white;
      }

      .chip:hover {
        background-color: color-mix(
          in srgb,
          var(--primary) 20%,
          transparent
        );
      }

      .validation-message {
        color: var(--error);
        font-size: 0.875rem;
        margin-top: calc(var(--spacing) * -2);
        margin-bottom: calc(var(--spacing) * 3);
        display: none;
      }

      /* Loading Spinner */
      .spinner {
        width: 24px;
        height: 24px;
        border: 3px solid
          color-mix(
            in srgb,
            var(--primary) 20%,
            transparent
          );
        border-radius: 50%;
        border-top-color: var(--primary);
        animation: spin 1s linear infinite;
        display: none;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Flashcards Workspace */
      .workspace {
        display: none;
        margin: calc(var(--spacing) * 4) 0;
      }

      .workspace-toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: calc(var(--spacing) * 2);
        margin-bottom: calc(var(--spacing) * 3);
        align-items: center;
      }

      .search-input {
        padding: calc(var(--spacing) * 2);
        border-radius: var(--border-radius);
        border: 1px solid
          color-mix(
            in srgb,
            var(--on-surface) 20%,
            transparent
          );
        background-color: var(--surface);
        color: var(--on-surface);
        min-width: 200px;
      }

      .select-input {
        padding: calc(var(--spacing) * 2);
        border-radius: var(--border-radius);
        border: 1px solid
          color-mix(
            in srgb,
            var(--on-surface) 20%,
            transparent
          );
        background-color: var(--surface);
        color: var(--on-surface);
      }

      .cards-grid {
        display: grid;
        grid-template-columns: repeat(
          auto-fill,
          minmax(280px, 1fr)
        );
        gap: calc(var(--spacing) * 3);
      }

      /* Card Styles */
      .card {
        background-color: var(--surface);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        height: 220px;
        perspective: 1000px;
        cursor: pointer;
      }

      .card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s;
        transform-style: preserve-3d;
      }

      .card.flipped .card-inner {
        transform: rotateY(180deg);
      }

      .card-front,
      .card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        padding: calc(var(--spacing) * 3);
        display: flex;
        flex-direction: column;
        justify-content: center;
        border-radius: var(--border-radius);
      }

      .card-back {
        transform: rotateY(180deg);
        overflow-y: auto;
      }

      .card-actions {
        position: absolute;
        bottom: calc(var(--spacing) * 2);
        right: calc(var(--spacing) * 2);
        display: flex;
        gap: var(--spacing);
      }

      .card-action-btn {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--surface);
        color: var(--on-surface);
        font-size: 0.875rem;
        box-shadow: var(--shadow);
      }

      .difficulty-buttons {
        display: flex;
        gap: var(--spacing);
        margin-top: calc(var(--spacing) * 2);
      }

      .difficulty-btn {
        padding: calc(var(--spacing) * 1)
          calc(var(--spacing) * 2);
        font-size: 0.75rem;
        border-radius: 12px;
      }

      .difficulty-easy {
        background-color: color-mix(
          in srgb,
          var(--success) 15%,
          transparent
        );
        color: var(--success);
      }

      .difficulty-medium {
        background-color: color-mix(
          in srgb,
          #ff9800 15%,
          transparent
        );
        color: #ff9800;
      }

      .difficulty-hard {
        background-color: color-mix(
          in srgb,
          var(--error) 15%,
          transparent
        );
        color: var(--error);
      }

      /* Empty State */
      .empty-state {
        text-align: center;
        padding: calc(var(--spacing) * 6) 0;
        display: none;
      }

      .empty-state img {
        max-width: 200px;
        margin-bottom: calc(var(--spacing) * 3);
        opacity: 0.7;
      }

      /* Quiz Mode */
      .quiz-container {
        display: none;
        margin: calc(var(--spacing) * 4) 0;
        background-color: var(--surface);
        border-radius: var(--border-radius);
        padding: calc(var(--spacing) * 4);
        box-shadow: var(--shadow);
      }

      .quiz-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: calc(var(--spacing) * 3);
      }

      .progress-bar {
        height: 8px;
        background-color: color-mix(
          in srgb,
          var(--on-surface) 10%,
          transparent
        );
        border-radius: 4px;
        margin-bottom: calc(var(--spacing) * 3);
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background-color: var(--primary);
        border-radius: 4px;
        width: 0%;
        transition: width 0.3s ease;
      }

      .quiz-card {
        min-height: 300px;
        margin-bottom: calc(var(--spacing) * 3);
      }

      .quiz-actions {
        display: flex;
        justify-content: space-between;
      }

      .quiz-results {
        display: none;
      }

      /* Progress Sidebar */
      .progress-sidebar {
        position: fixed;
        top: 80px;
        right: 0;
        width: 280px;
        height: calc(100vh - 80px);
        background-color: var(--surface);
        box-shadow: -2px 0 12px rgba(0, 0, 0, 0.08);
        padding: calc(var(--spacing) * 3);
        overflow-y: auto;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        z-index: 90;
      }

      .progress-sidebar.open {
        transform: translateX(0);
      }

      .sidebar-toggle {
        position: fixed;
        top: 50%;
        right: 0;
        transform: translateY(-50%);
        background-color: var(--primary);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 8px 0 0 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 95;
        box-shadow: -2px 0 8px rgba(0, 0, 0, 0.2);
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: calc(var(--spacing) * 2);
        margin-bottom: calc(var(--spacing) * 3);
      }

      .stat-card {
        background-color: var(--background);
        border-radius: var(--border-radius);
        padding: calc(var(--spacing) * 2);
        text-align: center;
      }

      .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: var(--spacing);
      }

      .stat-label {
        font-size: 0.75rem;
        color: color-mix(
          in srgb,
          var(--on-surface) 60%,
          transparent
        );
      }

      .mastery-bar {
        height: 8px;
        background-color: color-mix(
          in srgb,
          var(--on-surface) 10%,
          transparent
        );
        border-radius: 4px;
        margin: var(--spacing) 0;
        overflow: hidden;
      }

      .mastery-fill {
        height: 100%;
        background-color: var(--primary);
        border-radius: 4px;
      }

      /* Modals */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .modal-overlay.open {
        opacity: 1;
        visibility: visible;
      }

      .modal {
        background-color: var(--surface);
        border-radius: var(--border-radius);
        width: 90%;
        max-width: 500px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow);
        transform: translateY(20px);
        transition: transform 0.3s ease;
      }

      .modal-overlay.open .modal {
        transform: translateY(0);
      }

      .modal-header {
        padding: calc(var(--spacing) * 3);
        border-bottom: 1px solid
          color-mix(
            in srgb,
            var(--on-surface) 10%,
            transparent
          );
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-body {
        padding: calc(var(--spacing) * 3);
      }

      .modal-footer {
        padding: calc(var(--spacing) * 3);
        border-top: 1px solid
          color-mix(
            in srgb,
            var(--on-surface) 10%,
            transparent
          );
        display: flex;
        justify-content: flex-end;
        gap: calc(var(--spacing) * 2);
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: color-mix(
          in srgb,
          var(--on-surface) 60%,
          transparent
        );
      }

      /* Toasts */
      .toast-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }

      .toast {
        background-color: var(--surface);
        color: var(--on-surface);
        padding: calc(var(--spacing) * 2)
          calc(var(--spacing) * 3);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        margin-top: calc(var(--spacing) * 2);
        display: flex;
        align-items: center;
        gap: calc(var(--spacing) * 2);
        animation: slideIn 0.3s ease,
          fadeOut 0.5s ease 2.5s forwards;
      }

      .toast.success {
        border-left: 4px solid var(--success);
      }

      .toast.error {
        border-left: 4px solid var(--error);
      }

      @keyframes slideIn {
        from {
          transform: translateX(100px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
          visibility: hidden;
        }
      }

      /* Focus Mode */
      .focus-mode {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--surface);
        z-index: 1000;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        display: none;
      }

      .focus-card {
        width: 90%;
        max-width: 600px;
        min-height: 400px;
      }

      .focus-actions {
        margin-top: calc(var(--spacing) * 4);
      }

      .exit-focus {
        position: absolute;
        top: calc(var(--spacing) * 3);
        right: calc(var(--spacing) * 3);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .cards-grid {
          grid-template-columns: repeat(
            auto-fill,
            minmax(240px, 1fr)
          );
        }

        .progress-sidebar {
          width: 100%;
          transform: translateX(100%);
        }

        .workspace-toolbar {
          flex-direction: column;
          align-items: stretch;
        }

        .search-input,
        .select-input {
          width: 100%;
        }
      }

      @media (max-width: 480px) {
        .header-content {
          flex-direction: column;
          gap: calc(var(--spacing) * 2);
        }

        .cards-grid {
          grid-template-columns: 1fr;
        }

        .modal {
          width: 95%;
        }
      }

      /* Accessibility */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        :root {
          --primary: #004d00;
          --secondary: #00005c;
          --on-surface: #000000;
          --surface: #ffffff;
          --background: #f0f0f0;
        }

        [data-theme="dark"] {
          --on-surface: #ffffff;
          --surface: #000000;
          --background: #121212;
        }

        .card {
          border: 2px solid var(--on-surface);
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        .card-inner {
          transition: none;
        }
      }

      /* Text scaling */
      .text-scale-large {
        font-size: 1.2em;
        line-height: 1.8;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <div class="logo-icon">ASB</div>
            <div class="logo-text">AI Study Buddy</div>
          </div>
          <div class="header-actions">
            <button
              class="theme-toggle"
              id="themeToggle"
              aria-label="Toggle dark mode"
            >
              <span class="light-icon">🌙</span>
              <span class="dark-icon" style="display: none"
                >☀️</span
              >
            </button>
            <button class="btn btn-secondary" id="helpBtn">
              Help
            </button>
          </div>
        </div>
      </div>
    </header>

    <main class="container">
      <!-- Input Panel -->
      <section class="input-panel" id="inputPanel">
        <h2 class="panel-title">
          Paste your notes to generate flashcards
        </h2>
        <textarea
          id="notesInput"
          placeholder="Paste your study notes here... (minimum 200 characters)"
        ></textarea>
        <div class="chips-container" id="subjectChips">
          <div class="chip" data-value="math">Math</div>
          <div class="chip" data-value="science">
            Science
          </div>
          <div class="chip" data-value="history">
            History
          </div>
          <div class="chip" data-value="language">
            Language
          </div>
          <div class="chip" data-value="cs">
            Computer Science
          </div>
          <div class="chip" data-value="biology">
            Biology
          </div>
          <div class="chip" data-value="physics">
            Physics
          </div>
          <div class="chip" data-value="chemistry">
            Chemistry
          </div>
        </div>
        <div
          class="validation-message"
          id="validationMessage"
        >
          Please enter at least 200 characters
        </div>
        <button
          class="btn btn-primary btn-icon"
          id="generateBtn"
          disabled
        >
          Generate Flashcards
          <div class="spinner" id="generateSpinner"></div>
        </button>
      </section>

      <!-- Flashcards Workspace -->
      <section class="workspace" id="workspace">
        <div class="workspace-toolbar">
          <input
            type="text"
            class="search-input"
            id="searchInput"
            placeholder="Search flashcards..."
          />
          <select class="select-input" id="tagFilter">
            <option value="">All Tags</option>
            <option value="math">Math</option>
            <option value="science">Science</option>
            <option value="history">History</option>
            <option value="language">Language</option>
            <option value="cs">Computer Science</option>
            <option value="biology">Biology</option>
            <option value="physics">Physics</option>
            <option value="chemistry">Chemistry</option>
          </select>
          <select class="select-input" id="sortSelect">
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="hardest">Hardest First</option>
            <option value="easiest">Easiest First</option>
          </select>
          <button
            class="btn btn-secondary"
            id="selectAllBtn"
          >
            Select All
          </button>
          <button
            class="btn btn-secondary"
            id="deleteSelectedBtn"
          >
            Delete
          </button>
          <button class="btn btn-secondary" id="exportBtn">
            Export
          </button>
          <button class="btn btn-primary" id="startQuizBtn">
            Start Quiz
          </button>
          <button
            class="btn btn-secondary"
            id="focusModeBtn"
          >
            Focus Mode
          </button>
        </div>
        <div class="cards-grid" id="cardsGrid"></div>
        <div class="empty-state" id="emptyState">
          <img
            src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xNCAySDZjLTEuMSAwLTEuOTkuOS0xLjk5IDJMMyAyMGMwIDEuMS44OSAyIDIgMmgxMmMxLjEgMCAyLS45IDItMlY4bC02LTZ6TTYgMjBWNmg3djVoNXY5SDZ6IiBmaWxsPSIjODg4Ii8+PC9zdmc+"
            alt="No flashcards"
          />
          <h3>No flashcards yet</h3>
          <p>
            Generate your first set of flashcards by pasting
            your notes above
          </p>
        </div>
      </section>

      <!-- Quiz Mode -->
      <section class="quiz-container" id="quizContainer">
        <div class="quiz-header">
          <h2 id="quizProgress">Question 1 of 10</h2>
          <button
            class="btn btn-secondary"
            id="exitQuizBtn"
          >
            Exit Quiz
          </button>
        </div>
        <div class="progress-bar">
          <div
            class="progress-fill"
            id="quizProgressBar"
          ></div>
        </div>
        <div class="quiz-card card" id="quizCard">
          <div class="card-inner">
            <div class="card-front">
              <h3 id="quizQuestion">
                What is the capital of France?
              </h3>
            </div>
            <div class="card-back">
              <h3 id="quizAnswer">Paris</h3>
              <div id="quizExplanation" class="mt-2">
                Paris is the capital and most populous city
                of France.
              </div>
              <div class="difficulty-buttons">
                <button
                  class="difficulty-btn difficulty-easy"
                  data-difficulty="easy"
                >
                  Easy
                </button>
                <button
                  class="difficulty-btn difficulty-medium"
                  data-difficulty="medium"
                >
                  Medium
                </button>
                <button
                  class="difficulty-btn difficulty-hard"
                  data-difficulty="hard"
                >
                  Hard
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="quiz-actions">
          <button
            class="btn btn-secondary"
            id="revealAnswerBtn"
          >
            Reveal Answer
          </button>
          <button
            class="btn btn-primary"
            id="nextQuestionBtn"
            style="display: none"
          >
            Next Question
          </button>
        </div>
        <div class="quiz-results" id="quizResults">
          <h2>Quiz Completed!</h2>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="accuracyRate">
                85%
              </div>
              <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="timeSpent">
                5:30
              </div>
              <div class="stat-label">Time Spent</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="cardsReviewed">
                20
              </div>
              <div class="stat-label">Cards Reviewed</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="masteryGain">
                +12%
              </div>
              <div class="stat-label">Mastery Gain</div>
            </div>
          </div>
          <h3>Cards to review again:</h3>
          <ul id="reviewList"></ul>
          <button
            class="btn btn-primary"
            id="restartQuizBtn"
          >
            Restart Quiz
          </button>
        </div>
      </section>
    </main>

    <!-- Progress Sidebar -->
    <div class="progress-sidebar" id="progressSidebar">
      <h3>Study Progress</h3>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalCards">0</div>
          <div class="stat-label">Total Cards</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="studiedToday">0</div>
          <div class="stat-label">Studied Today</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="masteryLevel">0%</div>
          <div class="stat-label">Mastery Level</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="currentStreak">0</div>
          <div class="stat-label">Day Streak</div>
        </div>
      </div>

      <h4>Mastery by Subject</h4>
      <div id="subjectMastery">
        <!-- Subject mastery bars will be inserted here -->
      </div>

      <h4>Recent Study Sets</h4>
      <div id="recentSets">
        <!-- Recent sets will be inserted here -->
      </div>

      <button
        class="btn btn-secondary"
        id="resetTodayBtn"
        style="margin-top: 16px; width: 100%"
      >
        Reset Today's Progress
      </button>
    </div>
    <div class="sidebar-toggle" id="sidebarToggle">📊</div>

    <!-- Focus Mode -->
    <div class="focus-mode" id="focusMode">
      <button
        class="btn btn-secondary exit-focus"
        id="exitFocusBtn"
      >
        Exit
      </button>
      <div class="focus-card card">
        <div class="card-inner">
          <div class="card-front">
            <h3 id="focusQuestion">
              What is the capital of France?
            </h3>
          </div>
          <div class="card-back">
            <h3 id="focusAnswer">Paris</h3>
            <div id="focusExplanation" class="mt-2">
              Paris is the capital and most populous city of
              France.
            </div>
          </div>
        </div>
      </div>
      <div class="focus-actions">
        <button class="btn btn-secondary" id="focusFlipBtn">
          Flip Card
        </button>
        <button class="btn btn-primary" id="focusNextBtn">
          Next Card
        </button>
      </div>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="helpModal">
      <div class="modal">
        <div class="modal-header">
          <h3>Help & Shortcuts</h3>
          <button class="close-btn" data-modal="helpModal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <h4>Keyboard Shortcuts</h4>
          <ul>
            <li>Space or Enter - Flip flashcard</li>
            <li>
              1, 2, 3 - Set difficulty (Easy, Medium, Hard)
            </li>
            <li>E - Edit card</li>
            <li>B - Bookmark card</li>
            <li>F - Toggle focus mode</li>
            <li>ESC - Close modals/exit focus mode</li>
          </ul>
          <h4>How to Use</h4>
          <p>
            Paste your study notes, select relevant
            subjects, and generate flashcards. Use the quiz
            mode to test your knowledge, and mark difficulty
            to help the spaced repetition system prioritize
            cards you struggle with.
          </p>
        </div>
        <div class="modal-footer">
          <button
            class="btn btn-primary"
            data-modal="helpModal"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="editCardModal">
      <div class="modal">
        <div class="modal-header">
          <h3>Edit Flashcard</h3>
          <button
            class="close-btn"
            data-modal="editCardModal"
          >
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="input-group">
            <label for="editQuestion">Question</label>
            <textarea id="editQuestion" rows="3"></textarea>
          </div>
          <div class="input-group" style="margin-top: 16px">
            <label for="editAnswer">Answer</label>
            <textarea id="editAnswer" rows="3"></textarea>
          </div>
          <div class="input-group" style="margin-top: 16px">
            <label for="editTags"
              >Tags (comma separated)</label
            >
            <input type="text" id="editTags" />
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="btn btn-secondary"
            data-modal="editCardModal"
          >
            Cancel
          </button>
          <button class="btn btn-primary" id="saveEditBtn">
            Save Changes
          </button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="exportModal">
      <div class="modal">
        <div class="modal-header">
          <h3>Export Flashcards</h3>
          <button
            class="close-btn"
            data-modal="exportModal"
          >
            &times;
          </button>
        </div>
        <div class="modal-body">
          <p>Choose export format:</p>
          <div
            style="
              display: flex;
              gap: 12px;
              margin-top: 16px;
            "
          >
            <button
              class="btn btn-secondary"
              id="exportJsonBtn"
            >
              JSON
            </button>
            <button
              class="btn btn-secondary"
              id="exportCsvBtn"
            >
              CSV
            </button>
            <button
              class="btn btn-secondary"
              id="exportPrintBtn"
            >
              Print View
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="btn btn-primary"
            data-modal="exportModal"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="deleteConfirmModal">
      <div class="modal">
        <div class="modal-header">
          <h3>Confirm Delete</h3>
          <button
            class="close-btn"
            data-modal="deleteConfirmModal"
          >
            &times;
          </button>
        </div>
        <div class="modal-body">
          <p>
            Are you sure you want to delete the selected
            flashcards? This action cannot be undone.
          </p>
        </div>
        <div class="modal-footer">
          <button
            class="btn btn-secondary"
            data-modal="deleteConfirmModal"
          >
            Cancel
          </button>
          <button
            class="btn btn-primary"
            id="confirmDeleteBtn"
          >
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>
    <script src="script.js"></script>
  </body>
</html>
